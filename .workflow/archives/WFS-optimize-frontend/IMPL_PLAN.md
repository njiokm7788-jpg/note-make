# 实施计划：前端优化

## 概述

**会话**: WFS-optimize-frontend
**目标**: 优化前端，符合人类操作习惯
**目标用户**: 普通用户

## 任务分解

### IMPL-001: 实现预设方案系统

**优先级**: P0
**预计影响文件**:
- `src/utils/imageProcessor.ts` - 添加预设定义
- `src/components/ProcessingPanel.tsx` - 添加预设选择 UI
- `src/App.tsx` - 添加预设状态管理

**实现要点**:
1. 在 `imageProcessor.ts` 中定义预设数组
2. 在 `ProcessingPanel` 中添加预设卡片 UI
3. 选择预设时自动应用对应参数
4. 高级参数默认折叠，选择"自定义"时展开

**验收标准**:
- [ ] 提供 3 个预设：标准、轻量、强调
- [ ] 点击预设卡片立即应用参数
- [ ] 高级参数默认折叠

---

### IMPL-002: 实现粘贴板支持

**优先级**: P0
**预计影响文件**:
- `src/App.tsx` - 添加全局粘贴事件监听
- `src/components/ImageUploader.tsx` - 添加粘贴提示

**实现要点**:
1. 在 `App.tsx` 中添加 `useEffect` 监听 `paste` 事件
2. 智能填充：先填原图，后填标注图
3. 粘贴成功时显示 toast 提示
4. 在上传区域添加"支持 Ctrl+V 粘贴"提示

**验收标准**:
- [ ] Ctrl+V 可粘贴图片
- [ ] 自动填充到正确位置
- [ ] 显示粘贴成功提示

---

### IMPL-003: 简化预览区域

**优先级**: P1
**预计影响文件**:
- `src/App.tsx` - 添加视图切换状态和逻辑

**实现要点**:
1. 添加 `showComparison` 状态
2. 默认只显示最终结果大图
3. 提供"查看对比"按钮展开四宫格
4. 下载按钮位置更明显

**验收标准**:
- [ ] 默认显示最终结果大图
- [ ] 可切换到对比视图
- [ ] 下载按钮易于发现

---

### IMPL-004: 清理批量处理模式 UI

**优先级**: P1
**预计影响文件**:
- `src/App.tsx` - 移除差值模式相关 UI

**实现要点**:
1. 移除批量处理设置中的"差值提取"/"遮罩模式"切换
2. 移除差值模式相关参数（threshold, edgeSmooth, denoiseLevel 等）
3. 简化为只显示遮罩模式参数

**验收标准**:
- [ ] 批量处理设置只显示遮罩模式参数
- [ ] 界面更简洁

---

## 依赖关系

```
IMPL-001 (预设系统)
    ↓
IMPL-002 (粘贴板支持) [可并行]
    ↓
IMPL-003 (预览简化)
    ↓
IMPL-004 (清理 UI)
```

## 风险评估

| 风险 | 影响 | 缓解措施 |
|-----|-----|---------|
| 粘贴事件冲突 | 可能与其他输入框冲突 | 检查 event.target 是否为输入元素 |
| 预设参数不合适 | 用户体验不佳 | 保留自定义入口，可后续调整 |

## 测试要点

1. **预设切换**: 验证参数正确应用
2. **粘贴功能**: 验证图片正确填充
3. **实时预览**: 验证预设切换后预览更新
4. **向后兼容**: 验证现有功能不受影响
